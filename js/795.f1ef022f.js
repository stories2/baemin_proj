"use strict";(self["webpackChunkbaemin_proj"]=self["webpackChunkbaemin_proj"]||[]).push([[795],{6146:function(e,t,o){o.d(t,{Z:function(){return k}});var n=o(3396),r=o(7139);function s(e,t,o,s,d,l){const a=(0,n.up)("BIconArrowDownShort"),i=(0,n.up)("AddressModal"),u=(0,n.Q2)("b-modal");return(0,n.wg)(),(0,n.iD)("div",{style:(0,r.j5)({color:e.color||"white"})},[(0,n.Uk)((0,r.zw)(e.addrStr)+" ",1),"장바구니"!==e.addrStr?(0,n.wy)(((0,n.wg)(),(0,n.j4)(a,{key:0,onClick:t[0]||(t[0]=t=>e.onArrowBtnClicked())},null,512)),[[u,void 0,void 0,{addressModal:!0}]]):(0,n.kq)("",!0),(0,n.Wm)(i,{ref:"addressModalComponent",onAddressLoad:e.onAddressLoaded},null,8,["onAddressLoad"])],4)}const d={id:"map",ref:"map",style:{display:"hidden"}},l={class:"container"},a={class:"row"},i={class:"col"},u={class:"col"},c=(0,n.Uk)(" 현재 위치로 설정");function m(e,t,o,r,s,m){const p=(0,n.up)("b-form-input"),g=(0,n.up)("BIconGeo"),w=(0,n.up)("b-modal");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",d,null,512),(0,n.Wm)(w,{ref:"addressModal",id:"addressModal",title:"주소 설정","hide-footer":""},{default:(0,n.w5)((()=>[(0,n._)("div",l,[(0,n._)("div",a,[(0,n._)("div",i,[(0,n.Wm)(p,{modelValue:e.address,"onUpdate:modelValue":t[0]||(t[0]=t=>e.address=t),placeholder:"지번, 도로명으로 검색"},null,8,["modelValue"])])]),(0,n._)("div",{class:"row",style:{"margin-top":"15px",cursor:"pointer"},onClick:t[1]||(t[1]=t=>e.getUserLocation())},[(0,n._)("div",u,[(0,n.Wm)(g),c])])])])),_:1},512)])}o(1703);var p=o(2482);class g{constructor(e,t,o,n){(0,p.Z)(this,"container",void 0),(0,p.Z)(this,"map",void 0),(0,p.Z)(this,"geocoder",void 0),this.container=e;const r={center:new window.kakao.maps.LatLng(t,o),level:n};this.map=new window.kakao.maps.Map(this.container,r),this.geocoder=new window.kakao.maps.services.Geocoder}coord2RegionCode(e){return new Promise((t=>{this.geocoder.coord2Address(e.long,e.lat,(e=>{t(e)}))}))}addressSearch(e){return new Promise((t=>{this.geocoder.addressSearch(e,((e,o)=>{t({result:e,status:o})}))}))}}class w{getLocationAutomatically(){const e=new w;return e.grantLocation().then((t=>{if("denied"!=t)return e.getCurrentLocation();throw new Error("User denied location permission")}))}grantLocation(){return this.grantPermission("geolocation")}grantPermission(e){return navigator.permissions.query({name:e}).then((e=>e.state))}getCurrentLocation(){return new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition((t=>{e(t.coords)}),(e=>{t(e)}))}))}}var h=(0,n.aZ)({name:"AddressModal",data(){return{address:"",kakaoMap:{}}},mounted(){this.kakaoMap=new g(this.$refs.map,33.450701,126.570667,3)},methods:{showModal(){console.log(this.$refs.addressModal)},hideModal(){},getUserLocation(){let e={lat:0,long:0,address_name:"",main_address_no:"",mountain_yn:"",region_1depth_name:"",region_2depth_name:"",region_3depth_name:"",sub_address_no:"",zip_code:""};const t=new w;t.getLocationAutomatically().then((t=>(console.log("pos",t),t?(e.lat=t.latitude,e.long=t.longitude,this.kakaoMap.coord2RegionCode({lat:t.latitude,long:t.longitude})):null))).then((t=>{if(console.log("res",t),!(t&&t.length>0))throw new Error("Cannot get user address info");{const o=t[0].address;e={...e,...o},console.log(e),this.$emit("address-load",e),this.address=`${e.region_1depth_name} ${e.region_2depth_name} ${e.region_3depth_name}`}})).catch((e=>{console.error("[AddressModal] [getUserLocation] ",e)}))}}}),_=o(89);const f=(0,_.Z)(h,[["render",m]]);var v=f,W=(0,n.aZ)({name:"AddressSelectBtn",components:{AddressModal:v},props:{address:String,color:String},data(){return{addrStr:this.address}},methods:{onArrowBtnClicked(){this.$refs.addressModalComponent.showModal()},onAddressLoaded(e){console.log("addressInfo",e),this.addrStr=`${e.region_1depth_name} ${e.region_2depth_name} ${e.region_3depth_name}`}}});const y=(0,_.Z)(W,[["render",s],["__scopeId","data-v-ec00721c"]]);var k=y},9869:function(e,t,o){o.d(t,{Z:function(){return u}});var n=o(3396),r=o(7139);function s(e,t,o,s,d,l){const a=(0,n.up)("BIconArrowLeftShort"),i=(0,n.up)("b-col"),u=(0,n.up)("address-selector-btn"),c=(0,n.up)("b-row");return(0,n.wg)(),(0,n.j4)(c,{style:{"min-height":"48px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{style:{"text-align":"left"}},{default:(0,n.w5)((()=>[(0,n._)("span",{style:(0,r.j5)([{transform:"translateY(20%)",display:"inline-block","font-size":"1.6em","font-weight":"bold",cursor:"pointer"},{color:e.color}])},[(0,n.Wm)(a)],4)])),_:1}),(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[e.address?((0,n.wg)(),(0,n.j4)(u,{key:0,style:{transform:"translateY(70%)"},address:e.address,color:e.color},null,8,["address","color"])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(i)])),_:1})}var d=o(6146),l=(0,n.aZ)({name:"InAppTopBar",components:{AddressSelectorBtn:d.Z},props:{address:String,color:{type:String,default:"black"}}}),a=o(89);const i=(0,a.Z)(l,[["render",s]]);var u=i},8923:function(e,t,o){o.d(t,{Z:function(){return a}});var n=o(3396);function r(e,t,o,r,s,d){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.WI)(e.$slots,"default",{},void 0,!0)])}var s=(0,n.aZ)({name:"SectionCard"}),d=o(89);const l=(0,d.Z)(s,[["render",r],["__scopeId","data-v-692df8b0"]]);var a=l},7795:function(e,t,o){o.r(t),o.d(t,{default:function(){return B}});var n=o(3396),r=o(7139);const s=e=>((0,n.dD)("data-v-9bd637b8"),e=e(),(0,n.Cn)(),e),d=s((()=>(0,n._)("h4",null,"하루엔소쿠 길동점",-1))),l=s((()=>(0,n._)("hr",null,null,-1))),a=s((()=>(0,n._)("hr",null,null,-1))),i=(0,n.Uk)(" 더 담으러 가기 "),u=s((()=>(0,n._)("hr",null,null,-1)));function c(e,t,o,s,c,m){const p=(0,n.up)("in-app-top-bar"),g=(0,n.up)("b-col"),w=(0,n.up)("b-row"),h=(0,n.up)("basket-item"),_=(0,n.up)("BIconPlusLg"),f=(0,n.up)("section-card"),v=(0,n.up)("pay-col"),W=(0,n.up)("b-button");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(p,{address:"장바구니"}),(0,n.Wm)(f,{style:{"text-align":"left"}},{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[d])),_:1})])),_:1}),l,(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.orders.orderList,(t=>((0,n.wg)(),(0,n.j4)(g,{cols:"12",lg:"6",key:t},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{id:t.guid,name:t.name,cost:t.cost,onOnDelete:e.onItemDelete},null,8,["id","name","cost","onOnDelete"])])),_:2},1024)))),128))])),_:1}),a,(0,n.Wm)(w,{style:{"text-align":"center","font-weight":"bold"}},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_),i])),_:1})])),_:1})])),_:1}),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g,{cols:"12",md:"6"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{text:"총 주문금액",cost:e.sumCost},null,8,["cost"])])),_:1}),(0,n.Wm)(g,{cols:"12",md:"6"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{text:"배달팁",cost:e.deliveryTip},null,8,["cost"])])),_:1})])),_:1}),u,(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,{text:"결제예정금액",cost:e.paymentCost,isBold:!0},null,8,["cost"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g,{style:{height:"50px"}})])),_:1}),(0,n.Wm)(w,{"align-h":"end"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{style:{"text-align":"right"},cols:"12",md:"6",lg:"3"},{default:(0,n.w5)((()=>[(0,n.Wm)(W,{disabled:e.orders.orderList.length<=0,class:"payment-btn",onClick:t[0]||(t[0]=t=>e.startPayment())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)((e.paymentCost||0).toLocaleString())+"원 배달 주문하기",1)])),_:1},8,["disabled"])])),_:1})])),_:1}),(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g,{style:{height:"50px"}})])),_:1})])}var m=o(4060),p=o(3419),g=o(9869),w=o(8923);const h=e=>((0,n.dD)("data-v-5d9339f4"),e=e(),(0,n.Cn)(),e),_={style:{"margin-bottom":"15px"}},f=h((()=>(0,n._)("div",{class:"food-img"},null,-1)));function v(e,t,o,s,d,l){const a=(0,n.up)("b-col"),i=(0,n.up)("BIconXLg"),u=(0,n.up)("b-row");return(0,n.wg)(),(0,n.iD)("div",_,[(0,n.Wm)(u,{style:{"margin-bottom":"15px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(a,null,{default:(0,n.w5)((()=>[(0,n._)("div",null,(0,r.zw)(e.name),1)])),_:1}),(0,n.Wm)(a,{style:{"text-align":"right"}},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{style:{cursor:"pointer"},onClick:t[0]||(t[0]=t=>e.onDeleteClicked())})])),_:1})])),_:1}),(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(a,{cols:"2",md:"4",lg:"5"},{default:(0,n.w5)((()=>[f])),_:1}),(0,n.Wm)(a,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(a,null,{default:(0,n.w5)((()=>[(0,n.Uk)("가격: 단품 ("+(0,r.zw)((e.cost||0).toLocaleString())+"원)",1)])),_:1})])),_:1}),(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(a,{style:{"font-weight":"bold"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)((e.cost||0).toLocaleString())+"원",1)])),_:1})])),_:1})])),_:1})])),_:1})])}var W=(0,n.aZ)({name:"BasketItem",props:{id:String,name:String,cost:Number},methods:{onDeleteClicked(){this.$emit("on-delete",this.id)}}}),y=o(89);const k=(0,y.Z)(W,[["render",v],["__scopeId","data-v-5d9339f4"]]);var b=k;function C(e,t,o,s,d,l){const a=(0,n.up)("b-col"),i=(0,n.up)("b-row");return(0,n.wg)(),(0,n.iD)("div",{style:(0,r.j5)({fontWeight:e.isBold?"bold":"normal"})},[(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n.Wm)(a,{style:{"text-align":"left"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.text),1)])),_:1}),(0,n.Wm)(a,{style:{"text-align":"right"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)((e.cost||0).toLocaleString())+"원",1)])),_:1})])),_:1})],4)}var L=(0,n.aZ)({name:"PayCol",props:{text:String,cost:Number,isBold:Boolean}});const S=(0,y.Z)(L,[["render",C]]);var Z=S,x=(0,n.aZ)({components:{InAppTopBar:g.Z,SectionCard:w.Z,BasketItem:b,PayCol:Z},data(){return{dispatch:(0,p.H)(),orders:(0,p.v)((e=>e.orders)),orderList:(0,p.v)((e=>e.orders)).value.orderList,orderListTest:[{id:"test1",cost:12e3},{id:"test2",cost:12e3},{id:"test3",cost:12e3},{id:"test4",cost:12e3}],deliveryTip:2900}},mounted(){console.log("test",(0,p.v)((e=>e.orders)))},methods:{startPayment(){this.dispatch((0,m.Ls)({cost:this.paymentCost}))},onItemDelete(e){console.log("del",e),this.dispatch((0,m.n_)({id:e}))}},computed:{sumCost(){return this.orders.orderList.reduce(((e,t)=>e+t.cost),0)},orderListRedux(){return this.orderList},paymentCost(){return this.sumCost+this.deliveryTip}}});const A=(0,y.Z)(x,[["render",c],["__scopeId","data-v-9bd637b8"]]);var B=A}}]);
//# sourceMappingURL=795.f1ef022f.js.map